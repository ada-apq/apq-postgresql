-- Build file for Aw_Lib.
--
-- author Marcelo Cora√ßa de Freitas <marcelo.batera@gmail.com> 
--
-- Repository information:
-- $Date: 2008-02-25 19:47:48 -0300 (Seg, 25 Fev 2008) $
-- $Revision: 234 $
-- $Author: ogro $


with "apq.gpr";

project APQ.PostgreSQL is

	version := $version;
	ali_d_file := $lib_path & "/ada/apq-postgresql/shared" ;
	ali_s_file := $lib_path & "/ada/apq-postgresql/static" ;
	
	type Library_Kind_Type is ("static", "relocatable","dynamic");

	Library_Kind : Library_Kind_Type := apq'Library_Kind ;
	
	for Languages use ( "Ada", "C" );
	
	for Source_Dirs use ( $include_path );
	
	-- LIBRARY
	for Library_Dir use $lib_path;
	for Library_Name use "apq-postgresql";
	for Library_Kind use Library_Kind;
	case Library_Kind is
		when "dynamic" | "relocatable" =>
			for Library_ALI_Dir use ali_s_file ;
		
		when "static" =>
			for Library_ALI_Dir use ali_s_file ;
	end case;
	for Library_Version use "libapq-postgresql.so." & Version;
	
	
	package Compiler is
		for Default_Switches ("ada") use ("-O2", "-gnat05");
	end Compiler;



	package Linker is -- Obs.: this "linker" package is ignored by gnat in library projects.
                          -- :-) take care about this issue :-)
		for Default_Switches ("Ada") use (
			"-lpq",
			"-lapq-postgresqlhelp"
		);
		--for Default_Switches ("ada") use ("-ldl", "-lpq");
	end Linker;

	for Externally_Built use "true";

end APQ.PostgreSQL;

